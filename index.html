<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oto YÄ±kama Takip Sistemi</title>
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        /* Global sÄ±fÄ±rlamalar */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Body stilleri */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); /* Mor-mavi degrade arka plan */
            min-height: 100vh; /* Tam ekran yÃ¼ksekliÄŸi */
            color: #333; /* VarsayÄ±lan metin rengi */
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        /* Ana konteyner stilleri */
        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1); /* YarÄ± ÅŸeffaf beyaz arka plan */
            backdrop-filter: blur(10px); /* Arka plan bulanÄ±klÄ±ÄŸÄ± */
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2); /* BÃ¼yÃ¼k gÃ¶lge efekti */
        }

        /* BaÅŸlÄ±k alanÄ± stilleri */
        .header {
            background: rgba(255, 255, 255, 0.15); /* YarÄ± ÅŸeffaf beyaz arka plan */
            backdrop-filter: blur(10px); /* Arka plan bulanÄ±klÄ±ÄŸÄ± */
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white; /* Metin rengi */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            flex-wrap: wrap; /* KÃ¼Ã§Ã¼k ekranlarda sarmalama */
        }

        /* Logo stilleri */
        .logo {
            font-size: 28px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Navigasyon butonlarÄ± stilleri */
        .nav-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Genel buton stilleri */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease; /* YumuÅŸak geÃ§iÅŸ efektleri */
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
        }

        /* Birincil buton stilleri */
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2); /* Mor-mavi degrade */
            color: white;
            box-shadow: 0 4px 10px rgba(102, 126, 234, 0.4);
        }

        /* Ä°kincil buton stilleri */
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        /* Tehlike (kÄ±rmÄ±zÄ±) buton stilleri */
        .btn-danger {
            background: linear-gradient(45deg, #e74c3c, #c0392b); /* KÄ±rmÄ±zÄ± degrade */
            color: white;
        }

        /* BaÅŸarÄ± (yeÅŸil) buton stilleri */
        .btn-success {
            background: linear-gradient(45deg, #2ecc71, #27ae60); /* YeÅŸil degrade */
            color: white;
        }

        /* Buton hover efekti */
        .btn:hover:not(:disabled) {
            transform: translateY(-2px); /* Hafif yukarÄ± kayma */
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); /* GÃ¶lge bÃ¼yÃ¼mesi */
        }

        /* Engelli buton stilleri */
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Ekran (sayfa) stilleri */
        .screen {
            display: none; /* VarsayÄ±lan olarak gizli */
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        /* Aktif ekran stilleri */
        .screen.active {
            display: block; /* Aktif olduÄŸunda gÃ¶rÃ¼nÃ¼r */
            animation: fadeIn 0.5s ease-out; /* AÃ§Ä±lÄ±ÅŸ animasyonu */
        }

        /* FadeIn animasyonu */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form grubu stilleri */
        .form-group {
            margin-bottom: 20px;
        }

        /* Etiket stilleri */
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        /* Input, select, textarea stilleri */
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #fcfcfc;
        }

        /* Input, select, textarea focus stilleri */
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.2);
        }

        /* Arama kutusu konteyneri stilleri */
        .search-container {
            position: relative;
            margin-bottom: 30px;
        }

        /* Arama inputu stilleri */
        .search-input {
            padding-left: 50px;
            font-size: 18px;
            height: 60px;
            border-radius: 30px;
            background-color: #f0f0f0;
        }

        /* Arama ikonu stilleri */
        .search-icon {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #667eea;
        }

        /* AraÃ§ kartÄ± stilleri */
        .car-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #e0e6f0 100%);
            border-radius: 18px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        /* AraÃ§ kartÄ± hover efekti */
        .car-card:hover {
            transform: translateY(-5px);
        }

        /* AraÃ§ kartÄ± baÅŸlÄ±ÄŸÄ± stilleri */
        .car-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        /* Plaka numarasÄ± stilleri */
        .plate-number {
            font-size: 26px;
            font-weight: bold;
            color: #4a5ee5;
        }

        /* Durum etiketi stilleri */
        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 13px;
            text-transform: uppercase;
        }

        /* Durum renkleri */
        .status.waiting { background: #ffd54f; color: #f57f17; } /* SarÄ± */
        .status.washing { background: #64b5f6; color: #1976d2; } /* AÃ§Ä±k mavi */
        .status.drying { background: #a5d6a7; color: #2e7d32; } /* AÃ§Ä±k yeÅŸil */
        .status.ready { background: #ffab91; color: #bf360c; } /* Turuncu */
        .status.completed { background: #b0bec5; color: #455a64; } /* Gri */

        /* AraÃ§ detaylarÄ± grid stilleri */
        .car-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        /* Detay Ã¶ÄŸesi stilleri */
        .detail-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 12px;
            border-radius: 10px;
        }

        /* Detay etiketi stilleri */
        .detail-label {
            font-size: 12px;
            color: #777;
            margin-bottom: 5px;
        }

        /* Detay deÄŸeri stilleri */
        .detail-value {
            font-weight: bold;
            color: #333;
        }

        /* GiriÅŸ formu stilleri */
        .login-form {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
        }

        /* HoÅŸgeldin metni stilleri */
        .welcome-text {
            font-size: 28px;
            margin-bottom: 30px;
            color: #667eea;
            font-weight: bold;
        }

        /* Form grid stilleri */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        /* BÃ¶lÃ¼m baÅŸlÄ±ÄŸÄ± stilleri */
        .section-header {
            background: rgba(248, 249, 250, 0.9);
            padding: 25px;
            border-radius: 18px;
            margin-bottom: 30px;
        }

        .section-header h3 {
            color: #4a5ee5;
            margin-bottom: 20px;
            font-size: 22px;
        }

        /* Durum kontrol butonlarÄ± stilleri */
        .status-controls {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Durum butonu stilleri */
        .status-btn {
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            background-color: #f0f0f0;
            color: #555;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .status-btn:hover {
            transform: translateY(-1px);
        }

        .status-btn.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        /* Bildirim kutusu stilleri */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            z-index: 1000;
            transform: translateX(100%); /* BaÅŸlangÄ±Ã§ta ekran dÄ±ÅŸÄ± */
            transition: transform 0.3s ease; /* YumuÅŸak giriÅŸ */
        }

        .notification.show {
            transform: translateX(0); /* GÃ¶sterildiÄŸinde ekrana gir */
        }

        .notification.success { background: #4caf50; } /* YeÅŸil */
        .notification.error { background: #f44336; } /* KÄ±rmÄ±zÄ± */
        .notification.info { background: #2196f3; } /* Mavi */

        /* Raporlar grid stilleri */
        .report-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Rapor kartÄ± stilleri */
        .report-card {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }

        /* Rapor numarasÄ± stilleri */
        .report-number {
            font-size: 36px;
            font-weight: bold;
            color: #1976d2;
        }

        /* Rapor etiketi stilleri */
        .report-label {
            font-size: 14px;
            color: #666;
        }

        /* YÃ¼kleniyor stilleri */
        .loading {
            text-align: center;
            padding: 40px;
            color: #777;
        }

        /* Buton grubu stilleri */
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        /* Firebase yapÄ±landÄ±rma hata stilleri */
        .config-error {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 800px;
            margin: 0 auto;
        }

        .error-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        .config-error h2 {
            color: #e74c3c;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .config-instructions {
            text-align: left;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        /* Geri Bildirim BÃ¶lÃ¼mÃ¼ Stillleri */
        .feedback-section {
            margin-top: 40px;
            animation: slideDown 0.5s ease-out;
        }

        .feedback-card {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); /* Turuncu tonlarda degrade */
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid #ffcc02; /* SarÄ± Ã§erÃ§eve */
        }

        .feedback-card h3 {
            color: #f57c00; /* Turuncu baÅŸlÄ±k */
            margin-bottom: 15px;
            font-size: 24px;
            text-align: center;
        }

        .rating-container {
            text-align: center;
            margin-bottom: 25px;
        }

        .star-rating {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
        }

        .star {
            font-size: 32px;
            cursor: pointer;
            transition: all 0.2s ease;
            filter: grayscale(100%); /* Pasif yÄ±ldÄ±zlar gri */
        }

        .star:hover,
        .star.active {
            filter: grayscale(0%); /* Aktif/hover yÄ±ldÄ±zlar renkli */
            transform: scale(1.1);
        }

        .rating-text {
            font-size: 14px;
            color: #f57c00;
            font-weight: bold;
        }

        /* Geri bildirim gelen kutusu stilleri */
        .feedback-inbox {
            max-height: 400px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
        }

        .feedback-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #4a5ee5; /* Sol kenarlÄ±k */
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .feedback-rating {
            display: flex;
            gap: 2px;
        }

        .feedback-meta {
            font-size: 12px;
            color: #666;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .feedback-comment {
            margin-top: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            font-style: italic;
            color: #555;
        }

        .feedback-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }

        .no-feedback {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 40px 20px;
        }

        /* Animasyonlar */
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* DuyarlÄ± tasarÄ±m (mobil uyumluluk) */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 15px;
            }

            .nav-buttons {
                justify-content: center;
                width: 100%;
            }

            .container {
                padding: 15px;
            }

            .screen {
                padding: 20px;
            }

            .form-grid {
                grid-template-columns: 1fr; /* Tek sÃ¼tunlu dÃ¼zen */
            }

            .feedback-card {
                padding: 20px;
            }

            .star {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fa-solid fa-car-wash"></i> Oto YÄ±kama Takip Sistemi
            </div>
            <div class="nav-buttons">
                <button class="btn btn-secondary" onclick="showLogin()" id="loginBtn">
                    <i class="fa-solid fa-sign-in-alt"></i> GiriÅŸ Yap
                </button>
                <button class="btn btn-primary" onclick="showCustomerSearch()" id="customerBtn">
                    <i class="fa-solid fa-search"></i> AraÃ§ Sorgula
                </button>
                <button class="btn btn-secondary" onclick="showEmployeePanel()" id="employeeBtn" style="display: none;">
                    <i class="fa-solid fa-users-gear"></i> Ã‡alÄ±ÅŸan Paneli
                </button>
                <button class="btn btn-secondary" onclick="showAdminPanel()" id="adminBtn" style="display: none;">
                    <i class="fa-solid fa-user-gear"></i> Admin Paneli
                </button>
                <button class="btn btn-secondary" onclick="showReports()" id="reportsBtn" style="display: none;">
                    <i class="fa-solid fa-chart-line"></i> Raporlar
                </button>
                <button class="btn btn-danger" onclick="logout()" id="logoutBtn" style="display: none;">
                    <i class="fa-solid fa-sign-out-alt"></i> Ã‡Ä±kÄ±ÅŸ
                </button>
            </div>
        </div>

        <!-- GiriÅŸ EkranÄ± -->
        <div id="loginScreen" class="screen">
            <div class="login-form">
                <h2 class="welcome-text">Sisteme GiriÅŸ</h2>
                <div class="form-group">
                    <label for="email">E-posta</label>
                    <input type="email" id="email" placeholder="E-posta adresinizi girin" required>
                </div>
                <div class="form-group">
                    <label for="password">Åifre</label>
                    <input type="password" id="password" placeholder="Åifrenizi girin" required>
                </div>
                <button class="btn btn-primary" onclick="login()">
                    <i class="fa-solid fa-sign-in-alt"></i> GiriÅŸ Yap
                </button>
            </div>
        </div>

        <!-- MÃ¼ÅŸteri Sorgu EkranÄ± -->
        <div id="customerScreen" class="screen active">
            <h2><i class="fa-solid fa-search"></i> AraÃ§ Durumu Sorgula</h2>
            <div class="search-container">
                <div class="search-icon">ğŸ”</div>
                <input type="text" class="search-input" id="plateSearch" 
                       placeholder="Plaka numarasÄ±nÄ± girin (Ã¶rn: 34ABC123)" 
                       oninput="searchCar()">
            </div>
            
            <div id="carResults">
                <p style="text-align: center; color: #777;">
                    Plaka numarasÄ±nÄ± girerek araÃ§ durumunu sorgulayabilirsiniz.
                </p>
            </div>

            <!-- Geri Bildirim BÃ¶lÃ¼mÃ¼ -->
            <div class="feedback-section" id="feedbackSection" style="display: none;">
                <div class="feedback-card">
                    <h3><i class="fa-solid fa-star"></i> Hizmetimizi DeÄŸerlendirin</h3>
                    <p>AraÃ§ yÄ±kama hizmetimizden memnun kaldÄ±nÄ±z mÄ±? GÃ¶rÃ¼ÅŸleriniz bizim iÃ§in deÄŸerli!</p>
                    
                    <div class="rating-container">
                        <label>Puan Verin:</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-rating="1">â­</span>
                            <span class="star" data-rating="2">â­</span>
                            <span class="star" data-rating="3">â­</span>
                            <span class="star" data-rating="4">â­</span>
                            <span class="star" data-rating="5">â­</span>
                        </div>
                        <div class="rating-text" id="ratingText">Puan seÃ§in</div>
                    </div>

                    <div class="form-group">
                        <label for="feedbackComment">Yorumunuz (Ä°steÄŸe baÄŸlÄ±):</label>
                        <textarea id="feedbackComment" 
                                  placeholder="Hizmetimiz hakkÄ±nda dÃ¼ÅŸÃ¼ncelerinizi paylaÅŸÄ±n..." 
                                  rows="4"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="customerNameFeedback">AdÄ±nÄ±z (Ä°steÄŸe baÄŸlÄ±):</label>
                        <input type="text" id="customerNameFeedback" placeholder="AdÄ±nÄ±z">
                    </div>

                    <button class="btn btn-primary" onclick="submitFeedback()" id="submitFeedbackBtn">
                        <i class="fa-solid fa-paper-plane"></i> Geri Bildirim GÃ¶nder
                    </button>
                </div>
            </div>
        </div>

        <!-- Ã‡alÄ±ÅŸan Paneli -->
        <div id="employeeScreen" class="screen">
            <h2><i class="fa-solid fa-users-gear"></i> Ã‡alÄ±ÅŸan Paneli</h2>
            
            <div class="section-header">
                <h3 id="carFormTitle"><i class="fa-solid fa-plus"></i> Yeni AraÃ§ Ekle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="newPlate">Plaka NumarasÄ±</label>
                        <input type="text" id="newPlate" placeholder="34ABC123" required>
                    </div>
                    <div class="form-group">
                        <label for="customerName">MÃ¼ÅŸteri AdÄ±</label>
                        <input type="text" id="customerName" placeholder="MÃ¼ÅŸteri adÄ±">
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Telefon</label>
                        <input type="tel" id="customerPhone" placeholder="05551234567">
                    </div>
                    <div class="form-group">
                        <label for="serviceType">Hizmet TÃ¼rÃ¼</label>
                        <select id="serviceType">
                            <option value="DÄ±ÅŸ YÄ±kama">DÄ±ÅŸ YÄ±kama</option>
                            <option value="Ä°Ã§ DÄ±ÅŸ YÄ±kama">Ä°Ã§ DÄ±ÅŸ YÄ±kama</option>
                            <option value="DetaylÄ± YÄ±kama">DetaylÄ± YÄ±kama</option>
                            <option value="Cila">Cila</option>
                            <option value="Nano Koruma">Nano Koruma</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="estimatedTime">Tahmini SÃ¼re (dk)</label>
                        <input type="number" id="estimatedTime" placeholder="45" min="1">
                    </div>
                    <div class="form-group">
                        <label for="price">Fiyat (â‚º)</label>
                        <input type="number" id="price" placeholder="150" min="0">
                    </div>
                </div>
                <button class="btn btn-primary" onclick="addCar()">
                    <i class="fa-solid fa-plus"></i> AraÃ§ Ekle
                </button>
            </div>

            <h3><i class="fa-solid fa-list"></i> Aktif AraÃ§lar</h3>
            <div id="employeeCarList" class="loading">
                <i class="fa-solid fa-spinner fa-spin"></i> YÃ¼kleniyor...
            </div>
        </div>

        <!-- Admin Paneli -->
        <div id="adminScreen" class="screen">
            <h2><i class="fa-solid fa-user-gear"></i> Admin Paneli</h2>
            
            <!-- Geri Bildirim Gelen Kutusu -->
            <div class="section-header">
                <h3><i class="fa-solid fa-inbox"></i> Geri Bildirim Gelen Kutusu</h3>
                <div class="feedback-inbox" id="feedbackInbox">
                    <div class="loading">
                        <i class="fa-solid fa-spinner fa-spin"></i> YÃ¼kleniyor...
                    </div>
                </div>
            </div>

            <div class="section-header">
                <h3><i class="fa-solid fa-user-plus"></i> Ã‡alÄ±ÅŸan Ekle</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="newUserEmail">E-posta</label>
                        <input type="email" id="newUserEmail" placeholder="calisan@example.com" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserPassword">Åifre</label>
                        <input type="password" id="newUserPassword" placeholder="En az 6 karakter" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserName">Ad Soyad</label>
                        <input type="text" id="newUserName" placeholder="Ã‡alÄ±ÅŸan adÄ±" required>
                    </div>
                    <div class="form-group">
                        <label for="newUserRole">Rol</label>
                        <select id="newUserRole">
                            <option value="employee">Ã‡alÄ±ÅŸan</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="addUser()">
                    <i class="fa-solid fa-user-plus"></i> KullanÄ±cÄ± Ekle
                </button>
            </div>

            <h3><i class="fa-solid fa-users"></i> KullanÄ±cÄ±lar</h3>
            <div id="userList" class="loading">
                <i class="fa-solid fa-spinner fa-spin"></i> YÃ¼kleniyor...
            </div>
        </div>

        <!-- Raporlar -->
        <div id="reportsScreen" class="screen">
            <h2><i class="fa-solid fa-chart-line"></i> GÃ¼nlÃ¼k Raporlar</h2>
            
            <div class="report-grid">
                <div class="report-card">
                    <div class="report-number" id="totalCars">0</div>
                    <div class="report-label">Toplam AraÃ§</div>
                </div>
                <div class="report-card">
                    <div class="report-number" id="activeCars">0</div>
                    <div class="report-label">Aktif AraÃ§</div>
                </div>
                <div class="report-card">
                    <div class="report-number" id="completedCars">0</div>
                    <div class="report-label">Tamamlanan</div>
                </div>
                <div class="report-card">
                    <div class="report-number" id="totalRevenue">â‚º0</div>
                    <div class="report-label">GÃ¼nlÃ¼k Gelir</div>
                </div>
                <div class="report-card">
                    <div class="report-number" id="avgRating">0.0</div>
                    <div class="report-label">Ortalama Puan</div>
                </div>
            </div>

            <h3><i class="fa-solid fa-history"></i> GÃ¼nlÃ¼k AraÃ§lar</h3>
            <div id="dailyCarsList" class="loading">
                <i class="fa-solid fa-spinner fa-spin"></i> YÃ¼kleniyor...
            </div>
        </div>
    </div>

    <div id="notification" class="notification"></div>

    <script type="module">
        // Firebase kÃ¼tÃ¼phanelerini iÃ§e aktarma
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js';
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, query, where, orderBy, onSnapshot, setDoc, getDoc, Timestamp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js';

        /*
         * Firebase Firestore GÃ¼venlik KurallarÄ± HakkÄ±nda Ã–nemli Bilgi:
         *
         * Bu hatayÄ± ('Missing or insufficient permissions') gidermek iÃ§in, Firebase projenizin
         * Firestore veritabanÄ± gÃ¼venlik kurallarÄ±nÄ± (Firebase konsolunda 'Firestore Database' -> 'Rules' sekmesi altÄ±nda bulunur)
         * uygulamanÄ±zÄ±n veri okuma/yazma gereksinimlerine gÃ¶re gÃ¼ncellemeniz GEREKMEKTEDÄ°R.
         *
         * AÅŸaÄŸÄ±daki Ã¶rnek kurallar, uygulamanÄ±n Ã§alÄ±ÅŸmasÄ± iÃ§in gerekli minimum izinleri saÄŸlar.
         * Kendi uygulamanÄ±zÄ±n gÃ¼venlik gereksinimlerine gÃ¶re bu kurallarÄ± daha fazla Ã¶zelleÅŸtirmelisiniz.
         *
         * Firebase Konsolunuzda (console.firebase.google.com) aÅŸaÄŸÄ±daki kurallarÄ± yapÄ±ÅŸtÄ±rÄ±n:
         */
        /*
        rules_version = '2';
        service cloud.firestore {
          match /databases/{database}/documents {
            // KullanÄ±cÄ±larÄ±n kimlik doÄŸrulamasÄ±ndan geÃ§mesi gerekiyor.
            function isSignedIn() {
              return request.auth != null;
            }

            // Bir kullanÄ±cÄ±nÄ±n 'admin' rolÃ¼ne sahip olup olmadÄ±ÄŸÄ±nÄ± kontrol eden fonksiyon.
            function isAdmin() {
              return isSignedIn() && get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
            }

            // 'cars' koleksiyonu iÃ§in kurallar
            // TÃ¼m kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lar araÃ§larÄ± okuyabilir.
            // Sadece kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lar araÃ§ ekleyebilir (ÅŸimdilik, daha sonra rol tabanlÄ± eklenebilir).
            // Sadece kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lar durumu gÃ¼ncelleyebilir.
            // Sadece adminler araÃ§ silebilir.
            match /cars/{carId} {
              allow read: if isSignedIn();
              allow create: if isSignedIn();
              allow update: if isSignedIn();
              allow delete: if isAdmin();
            }

            // 'feedbacks' koleksiyonu iÃ§in kurallar
            // TÃ¼m kimlik doÄŸrulamasÄ± yapÄ±lmÄ±ÅŸ kullanÄ±cÄ±lar geri bildirim oluÅŸturabilir.
            // Sadece adminler tÃ¼m geri bildirimleri okuyabilir, gÃ¼ncelleyebilir (okundu olarak iÅŸaretleme) ve silebilir.
            match /feedbacks/{feedbackId} {
              allow create: if isSignedIn();
              allow read, update, delete: if isAdmin();
            }

            // 'users' koleksiyonu iÃ§in kurallar
            // KullanÄ±cÄ±lar kendi profillerini okuyabilir.
            // Yeni kullanÄ±cÄ±lar kimlik doÄŸrulamadan sonra kendi dokÃ¼manlarÄ±nÄ± oluÅŸturabilir.
            // Adminler tÃ¼m kullanÄ±cÄ±larÄ± okuyabilir, oluÅŸturabilir ve gÃ¼ncelleyebilir.
            match /users/{userId} {
              allow read: if isSignedIn() && (request.auth.uid == userId || isAdmin());
              allow create: if isSignedIn() && request.auth.uid == userId; // Sadece kendi profilini oluÅŸturabilir
              allow update: if isAdmin(); // Sadece adminler diÄŸer kullanÄ±cÄ±larÄ±n rollerini/bilgilerini gÃ¼ncelleyebilir
              allow delete: if isAdmin();
            }
          }
        }
        */

        // Firebase yapÄ±landÄ±rmanÄ±zÄ± BURAYA EKLEYÄ°N
        // Bu bilgileri Firebase Proje AyarlarÄ± -> Genel bÃ¶lÃ¼mÃ¼nden alabilirsiniz.
        const firebaseConfig = {
  apiKey: "AIzaSyA6X-ZdiA11kK4R0D-09qlboQKmzhFOq1o",
  authDomain: "projecty-3d9d1.firebaseapp.com",
  projectId: "projecty-3d9d1",
  storageBucket: "projecty-3d9d1.firebasestorage.app",
  messagingSenderId: "158211801481",
  appId: "1:158211801481:web:78494e1dfed54e98a56158",
  measurementId: "G-B6V1Y6HT2Y"
};

        // Firebase deÄŸiÅŸkenleri
        let app;
        let auth;
        let db;

        // Global uygulama durumu deÄŸiÅŸkenleri
        let currentUser = null;
        let cars = [];
        let users = [];
        let feedbacks = [];
        let unsubscribers = [];
        let selectedRating = 0;
        let searchedPlate = '';

        // Firebase yapÄ±landÄ±rmasÄ±nÄ± doÄŸrula
        function validateFirebaseConfig() {
            if (!firebaseConfig.apiKey || firebaseConfig.apiKey === "YOUR_API_KEY") {
                return { isValid: false, message: 'Firebase API anahtarÄ± eksik veya hatalÄ±. LÃ¼tfen firebaseConfig objesini gÃ¼ncelleyin.' };
            }
            return { isValid: true };
        }

        // YapÄ±landÄ±rma hatasÄ± ekranÄ±nÄ± gÃ¶ster
        function showConfigError(message) {
            const container = document.querySelector('.container');
            container.innerHTML = '<div class="config-error">' +
                '<i class="fa-solid fa-triangle-exclamation error-icon" style="color: #e74c3c;"></i>' +
                '<h2>Firebase YapÄ±landÄ±rma HatasÄ±</h2>' +
                '<p>' + message + '</p>' +
                '<div class="config-instructions">' +
                '<h3>LÃ¼tfen ÅŸu adÄ±mlarÄ± takip edin:</h3>' +
                '<ol>' +
                '<li><strong>Firebase konsolunu ziyaret edin:</strong> <a href="https://console.firebase.google.com" target="_blank">console.firebase.google.com</a></li>' +
                '<li><strong>Yeni proje oluÅŸturun</strong> veya mevcut projenizi seÃ§in</li>' +
                '<li><strong>Proje ayarlarÄ± â†’ Genel</strong> bÃ¶lÃ¼mÃ¼ne gidin</li>' +
                '<li><strong>"UygulamalarÄ±nÄ±z"</strong> kÄ±smÄ±nda Web uygulamasÄ± ekleyin</li>' +
                '<li><strong>Firebase SDK snippet\'ini kopyalayÄ±n</strong></li>' +
                '<li><strong>Authentication â†’ Sign-in method</strong> kÄ±smÄ±nda Email/Password\'Ã¼ etkinleÅŸtirin</li>' +
                '<li><strong>Firestore Database</strong> oluÅŸturun</li>' +
                '<li><strong>KopyaladÄ±ÄŸÄ±nÄ±z config\'i kod iÃ§indeki firebaseConfig objesine yapÄ±ÅŸtÄ±rÄ±n</strong></li>' +
                '</ol>' +
                '</div>' +
                '<button class="btn btn-primary" onclick="location.reload()">' +
                '<i class="fa-solid fa-refresh"></i> SayfayÄ± Yenile' +
                '</button>' +
                '</div>';
        }

        // Firebase'i baÅŸlat
        async function initFirebase() {
            try {
                const configValidation = validateFirebaseConfig();
                if (!configValidation.isValid) {
                    showConfigError(configValidation.message);
                    return;
                }

                app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                
                console.log("Firebase baÅŸarÄ±yla baÅŸlatÄ±ldÄ±");
                showNotification("Firebase baÄŸlantÄ±sÄ± kuruldu", "success");
                
                // Kimlik doÄŸrulama durumu deÄŸiÅŸtiÄŸinde UI'Ä± gÃ¼ncelle
                onAuthStateChanged(auth, async (user) => {
                    console.log("Auth state deÄŸiÅŸti:", user ? user.uid : "Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±");
                    if (user) {
                        await loadUserData(user);
                        // KullanÄ±cÄ± verisi yÃ¼klendikten sonra gÃ¼nlÃ¼k temizliÄŸi kontrol et
                        checkDailyCleanup(); 
                    } else {
                        currentUser = null;
                        updateUI();
                        showCustomerSearch(); // Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±ÄŸÄ±nda mÃ¼ÅŸteri sorgu ekranÄ±na dÃ¶n
                    }
                });
                
            } catch (error) {
                console.error("Firebase baÅŸlatma hatasÄ±:", error);
                let errorMessage = "Firebase baÄŸlantÄ± hatasÄ±";
                if (error.code === 'auth/api-key-not-valid') {
                    errorMessage = "GeÃ§ersiz API anahtarÄ±. Firebase konfigÃ¼rasyonunu kontrol edin.";
                } else if (error.code === 'auth/invalid-api-key') {
                    errorMessage = "GeÃ§ersiz API anahtarÄ± formatÄ±.";
                }
                showConfigError(errorMessage);
            }
        }

        // KullanÄ±cÄ± verilerini Firestore'dan yÃ¼kle
        async function loadUserData(user) {
            try {
                console.log("KullanÄ±cÄ± verisi yÃ¼kleniyor:", user.uid);
                // KullanÄ±cÄ±nÄ±n rolÃ¼nÃ¼ al
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                
                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    currentUser = {
                        uid: user.uid,
                        email: user.email,
                        ...userData
                    };
                    console.log("KullanÄ±cÄ± verisi yÃ¼klendi:", currentUser);
                    showNotification('HoÅŸ geldiniz ' + currentUser.name + '!', 'success');
                    updateUI(); // UI'Ä± kullanÄ±cÄ±nÄ±n rolÃ¼ne gÃ¶re gÃ¼ncelle
                    setupRealtimeListeners(); // GerÃ§ek zamanlÄ± dinleyicileri baÅŸlat
                    
                    // KullanÄ±cÄ± rolÃ¼ne gÃ¶re varsayÄ±lan paneli gÃ¶ster
                    if (currentUser.role === 'admin') {
                        showEmployeePanel(); // Adminler doÄŸrudan Ã§alÄ±ÅŸan paneline gitsin
                    } else if (currentUser.role === 'employee') {
                        showEmployeePanel();
                    }
                } else {
                    console.error("KullanÄ±cÄ± dokÃ¼manÄ± Firestore'da bulunamadÄ±:", user.uid);
                    showNotification('KullanÄ±cÄ± profili bulunamadÄ±. LÃ¼tfen yÃ¶neticinize baÅŸvurun.', 'error');
                    await signOut(auth); // Profil bulunamazsa Ã§Ä±kÄ±ÅŸ yap
                }
            }
            catch (error) {
                console.error("KullanÄ±cÄ± verisi yÃ¼kleme hatasÄ±:", error);
                showNotification('KullanÄ±cÄ± bilgileri yÃ¼klenirken hata oluÅŸtu: ' + error.message, 'error');
                await signOut(auth); // Hata durumunda Ã§Ä±kÄ±ÅŸ yap
            }
        }

        // GÃ¼nlÃ¼k temizlik (eski araÃ§ kayÄ±tlarÄ±nÄ± siler)
        async function checkDailyCleanup() {
            // Sadece adminler gÃ¼nlÃ¼k temizliÄŸi yapabilir
            if (!currentUser || currentUser.role !== 'admin') {
                console.warn("GÃ¼nlÃ¼k temizlik admin yetkisi olmadan deneniyor. Ä°ÅŸlem iptal edildi.");
                // showNotification("GÃ¼nlÃ¼k temizlik iÃ§in yÃ¶netici yetkisi gerekli.", "error"); // Bu bildirim Ã§ok sÄ±k Ã§Ä±kabilir, sadece konsola logladÄ±k
                return; 
            }

            const today = new Date().toDateString();
            const lastCleanup = localStorage.getItem('lastCleanup');
            
            if (lastCleanup !== today) {
                await performDailyCleanup();
                localStorage.setItem('lastCleanup', today);
            }
        }

        async function performDailyCleanup() {
            try {
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);
                yesterday.setHours(23, 59, 59, 999); // DÃ¼n gece yarÄ±sÄ± sonu

                const oldCarsQuery = query(
                    collection(db, 'cars'),
                    where('createdAt', '<', Timestamp.fromDate(yesterday))
                );
                
                const oldCarsSnapshot = await getDocs(oldCarsQuery);
                
                for (const carDoc of oldCarsSnapshot.docs) {
                    await deleteDoc(carDoc.ref); // DokÃ¼manÄ± sil
                }

                console.log(oldCarsSnapshot.size + ' eski araÃ§ kaydÄ± temizlendi');
            } catch (error) {
                console.error("GÃ¼nlÃ¼k temizlik hatasÄ±:", error);
                showNotification("GÃ¼nlÃ¼k temizlik sÄ±rasÄ±nda hata oluÅŸtu: " + error.message, "error");
            }
        }

        // GerÃ§ek zamanlÄ± dinleyicileri baÅŸlat
        function setupRealtimeListeners() {
            // Ã–nceki dinleyicileri kapat
            unsubscribers.forEach(unsub => unsub());
            unsubscribers.length = 0;

            console.log("Real-time dinleyiciler baÅŸlatÄ±lÄ±yor...");

            // AraÃ§lar iÃ§in dinleyici
            const carsQuery = query(collection(db, 'cars'), orderBy('createdAt', 'desc'));
            const carsUnsub = onSnapshot(carsQuery, (snapshot) => {
                const prevCarsCount = cars.length;
                cars.length = 0; // Diziyi temizle
                cars.push(...snapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                })));
                
                console.log('AraÃ§ listesi gÃ¼ncellendi: ' + cars.length + ' araÃ§');
                
                // Yeni araÃ§ eklenirse bildirim gÃ¶ster
                if (cars.length > prevCarsCount && prevCarsCount > 0) {
                    const newCar = cars[0]; // En yeni araÃ§
                    showNotification('Yeni araÃ§ eklendi: ' + newCar.plate, 'info');
                }
                
                renderCarLists(); // AraÃ§ listelerini yeniden render et
                
                // MÃ¼ÅŸteri ekranÄ±ndaysa aramayÄ± tekrar yap
                const plateSearchInput = document.getElementById('plateSearch');
                if (document.getElementById('customerScreen').classList.contains('active') && 
                    plateSearchInput && plateSearchInput.value.trim().length >= 2) {
                    searchCar();
                }
            }, (error) => {
                console.error("Cars real-time listener hatasÄ±:", error);
                showNotification("BaÄŸlantÄ± sorunu: AraÃ§ verileri gÃ¼ncellenemiyor", "error");
            });
            unsubscribers.push(carsUnsub); // Dinleyiciyi kaydet

            // Admin ise geri bildirim ve kullanÄ±cÄ± dinleyicilerini baÅŸlat
            if (currentUser && currentUser.role === 'admin') {
                const feedbacksQuery = query(collection(db, 'feedbacks'), orderBy('createdAt', 'desc'));
                const feedbacksUnsub = onSnapshot(feedbacksQuery, (snapshot) => {
                    feedbacks.length = 0;
                    feedbacks.push(...snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    })));
                    console.log('Geri bildirim listesi gÃ¼ncellendi: ' + feedbacks.length + ' geri bildirim');
                    renderFeedbackInbox(); // Geri bildirim gelen kutusunu yeniden render et
                }, (error) => {
                    console.error("Feedbacks real-time listener hatasÄ±:", error);
                    // Ä°zin hatasÄ± burada yakalanÄ±r ve yÃ¶netici bilgilendirilir.
                    showNotification("Geri bildirimler yÃ¼klenemiyor: Ä°zin hatasÄ±. Firebase kurallarÄ±nÄ± kontrol edin.", "error");
                });
                unsubscribers.push(feedbacksUnsub);

                const usersQuery = query(collection(db, 'users'));
                const usersUnsub = onSnapshot(usersQuery, (snapshot) => {
                    users.length = 0;
                    users.push(...snapshot.docs.map(doc => ({
                        id: doc.id,
                        ...doc.data()
                    })));
                    console.log('KullanÄ±cÄ± listesi gÃ¼ncellendi: ' + users.length + ' kullanÄ±cÄ±');
                    renderUserList(); // KullanÄ±cÄ± listesini yeniden render et
                }, (error) => {
                    console.error("Users real-time listener hatasÄ±:", error);
                    showNotification("KullanÄ±cÄ±lar yÃ¼klenemiyor: Ä°zin hatasÄ±. Firebase kurallarÄ±nÄ± kontrol edin.", "error");
                });
                unsubscribers.push(usersUnsub);
            }
        }

        // Kimlik doÄŸrulama fonksiyonlarÄ±
        window.login = async function() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            if (!email || !password) {
                showNotification('E-posta ve ÅŸifre gerekli', 'error');
                return;
            }

            try {
                console.log("GiriÅŸ deniyor:", email);
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                console.log("Firebase Auth baÅŸarÄ±lÄ±:", userCredential.user.uid);
                showNotification('GiriÅŸ yapÄ±lÄ±yor...', 'info');
                // onAuthStateChanged listener'Ä± loadUserData'yÄ± Ã§aÄŸÄ±racak
                
            } catch (error) {
                console.error("GiriÅŸ hatasÄ±:", error);
                let errorMessage = 'GiriÅŸ baÅŸarÄ±sÄ±z';
                
                if (error.code === 'auth/user-not-found') {
                    errorMessage = 'KullanÄ±cÄ± bulunamadÄ±';
                } else if (error.code === 'auth/wrong-password') {
                    errorMessage = 'HatalÄ± ÅŸifre';
                } else if (error.code === 'auth/invalid-email') {
                    errorMessage = 'GeÃ§ersiz e-posta adresi';
                } else if (error.code === 'auth/too-many-requests') {
                    errorMessage = 'Ã‡ok fazla hatalÄ± deneme. LÃ¼tfen daha sonra tekrar deneyin.';
                } else {
                    errorMessage = 'GiriÅŸ baÅŸarÄ±sÄ±z: ' + error.message;
                }
                
                showNotification(errorMessage, 'error');
            }
        };

        window.logout = async function() {
            try {
                await signOut(auth);
                // TÃ¼m dinleyicileri kapat
                unsubscribers.forEach(unsub => unsub());
                unsubscribers.length = 0;
                showNotification('Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±', 'success');
                showCustomerSearch(); // MÃ¼ÅŸteri ekranÄ±na geri dÃ¶n
            } catch (error) {
                console.error("Ã‡Ä±kÄ±ÅŸ hatasÄ±:", error);
                showNotification('Ã‡Ä±kÄ±ÅŸ yapÄ±lÄ±rken hata oluÅŸtu.', 'error');
            }
        };

        // UI GÃ¼ncelleme fonksiyonlarÄ±
        function updateUI() {
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const employeeBtn = document.getElementById('employeeBtn');
            const adminBtn = document.getElementById('adminBtn');
            const reportsBtn = document.getElementById('reportsBtn');

            if (currentUser) {
                loginBtn.style.display = 'none';
                logoutBtn.style.display = 'flex';
                
                if (currentUser.role === 'admin') {
                    employeeBtn.style.display = 'flex';
                    adminBtn.style.display = 'flex';
                    reportsBtn.style.display = 'flex';
                } else if (currentUser.role === 'employee') {
                    employeeBtn.style.display = 'flex';
                    adminBtn.style.display = 'none';
                    reportsBtn.style.display = 'none';
                }
            } else {
                // GiriÅŸ yapÄ±lmamÄ±ÅŸsa varsayÄ±lan durum
                loginBtn.style.display = 'flex';
                logoutBtn.style.display = 'none';
                employeeBtn.style.display = 'none';
                adminBtn.style.display = 'none';
                reportsBtn.style.display = 'none';
            }
        }

        // Ekran deÄŸiÅŸtirme fonksiyonu
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // Bildirim gÃ¶sterme fonksiyonu
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = 'notification ' + type; // SÄ±nÄ±fÄ± temizle ve yenisini ekle
            notification.classList.add('show'); // Animasyonu baÅŸlat

            // 3 saniye sonra bildirimi gizle
            setTimeout(function() {
                notification.classList.remove('show');
            }, 3000);
        }

        // Ekran navigasyon fonksiyonlarÄ± (window nesnesine atanmÄ±ÅŸ)
        window.showLogin = function() {
            showScreen('loginScreen');
        };

        window.showCustomerSearch = function() {
            showScreen('customerScreen');
            document.getElementById('plateSearch').value = ''; // Arama kutusunu temizle
            document.getElementById('carResults').innerHTML = '<p style="text-align: center; color: #777;">Plaka numarasÄ±nÄ± girerek araÃ§ durumunu sorgulayabilirsiniz.</p>';
            document.getElementById('feedbackSection').style.display = 'none';
            searchedPlate = '';
            resetFeedbackForm(); // Geri bildirim formunu sÄ±fÄ±rla
        };

        window.showEmployeePanel = function() {
            if (!currentUser || (currentUser.role !== 'employee' && currentUser.role !== 'admin')) {
                showNotification('EriÅŸim yetkiniz yok', 'error');
                return;
            }
            showScreen('employeeScreen');
            renderCarLists(); // Ã‡alÄ±ÅŸan paneli aÃ§Ä±ldÄ±ÄŸÄ±nda araÃ§larÄ± render et
        };

        window.showAdminPanel = function() {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('Admin eriÅŸimi gerekli', 'error');
                return;
            }
            showScreen('adminScreen');
            renderFeedbackInbox(); // Admin paneli aÃ§Ä±ldÄ±ÄŸÄ±nda geri bildirimleri render et
            renderUserList(); // KullanÄ±cÄ± listesini render et
        };

        window.showReports = function() {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('Admin eriÅŸimi gerekli', 'error');
                return;
            }
            showScreen('reportsScreen');
            generateReports(); // RaporlarÄ± oluÅŸtur ve gÃ¶ster
            renderCarLists(); // GÃ¼nlÃ¼k araÃ§larÄ± rapor ekranÄ±nda gÃ¶ster
        };

        // AraÃ§ arama ve geri bildirim fonksiyonlarÄ±
        window.searchCar = function() {
            const searchTerm = document.getElementById('plateSearch').value.trim().toUpperCase();
            const resultsDiv = document.getElementById('carResults');
            const feedbackSection = document.getElementById('feedbackSection');
            
            if (searchTerm.length < 2) {
                resultsDiv.innerHTML = '<p style="text-align: center; color: #777;">Plaka numarasÄ±nÄ± girerek araÃ§ durumunu sorgulayabilirsiniz.</p>';
                feedbackSection.style.display = 'none';
                searchedPlate = '';
                return;
            }

            const filteredCars = cars.filter(car => 
                car.plate.toUpperCase().includes(searchTerm)
            );

            if (filteredCars.length === 0) {
                resultsDiv.innerHTML = '<div style="text-align: center; padding: 40px;">' +
                    '<i class="fa-solid fa-search" style="font-size: 48px; color: #ddd; margin-bottom: 15px;"></i>' +
                    '<p style="color: #777; font-size: 16px;">' +
                    '"<strong>' + searchTerm + '</strong>" plakasÄ± bulunamadÄ±.' +
                    '</p>' +
                    '<p style="color: #999; font-size: 14px;">' +
                    'FarklÄ± bir plaka deneyin veya Ã§alÄ±ÅŸanlarÄ±mÄ±zla iletiÅŸime geÃ§in.' +
                    '</p>' +
                    '</div>';
                feedbackSection.style.display = 'none';
                searchedPlate = '';
                return;
            }

            renderCars(resultsDiv, filteredCars, false); // MÃ¼ÅŸteri ekranÄ±nda aksiyon butonlarÄ± olmadan render et
            
            // EÄŸer tam eÅŸleÅŸme varsa geri bildirim formunu gÃ¶ster
            if (filteredCars.length === 1 && filteredCars[0].plate === searchTerm) {
                searchedPlate = filteredCars[0].plate;
                feedbackSection.style.display = 'block';
                resetFeedbackForm();
                showNotification(filteredCars[0].plate + ' plakasÄ± bulundu!', 'success');
            } else {
                feedbackSection.style.display = 'none';
                searchedPlate = '';
            }
        };

        // YÄ±ldÄ±z derecelendirmesini ayarla
        window.setRating = function(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('#starRating .star');
            const ratingText = document.getElementById('ratingText');
            
            const ratingTexts = {
                1: 'Ã‡ok KÃ¶tÃ¼',
                2: 'KÃ¶tÃ¼', 
                3: 'Orta',
                4: 'Ä°yi',
                5: 'MÃ¼kemmel'
            };
            
            stars.forEach(function(star, index) {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
            
            ratingText.textContent = ratingTexts[rating] || 'Puan seÃ§in';
        };

        // Geri bildirim gÃ¶nder
        window.submitFeedback = async function() {
            if (selectedRating === 0) {
                showNotification('LÃ¼tfen bir puan verin!', 'error');
                return;
            }

            if (!searchedPlate) {
                showNotification('Ã–nce bir araÃ§ sorgulayÄ±n!', 'error');
                return;
            }

            const comment = document.getElementById('feedbackComment').value.trim();
            const customerName = document.getElementById('customerNameFeedback').value.trim();

            try {
                const feedbackData = {
                    plate: searchedPlate,
                    rating: selectedRating,
                    comment: comment || null,
                    customerName: customerName || 'Anonim',
                    createdAt: Timestamp.now(),
                    isRead: false
                };

                await addDoc(collection(db, 'feedbacks'), feedbackData);
                showNotification('Geri bildiriminiz gÃ¶nderildi. TeÅŸekkÃ¼rler!', 'success');
                resetFeedbackForm(); // Formu sÄ±fÄ±rla
                
            } catch (error) {
                console.error('Geri bildirim gÃ¶nderme hatasÄ±:', error);
                showNotification('Geri bildirim gÃ¶nderilemedi. Tekrar deneyin.', 'error');
            }
        };

        // Geri bildirim formunu sÄ±fÄ±rla
        function resetFeedbackForm() {
            selectedRating = 0;
            document.getElementById('feedbackComment').value = '';
            document.getElementById('customerNameFeedback').value = '';
            document.querySelectorAll('#starRating .star').forEach(function(star) {
                star.classList.remove('active');
            });
            document.getElementById('ratingText').textContent = 'Puan seÃ§in';
        }

        // AraÃ§ yÃ¶netimi fonksiyonlarÄ±
        window.addCar = async function() {
            if (!currentUser) {
                showNotification('GiriÅŸ yapmanÄ±z gerekli', 'error');
                return;
            }

            const plate = document.getElementById('newPlate').value.trim().toUpperCase();
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            const serviceType = document.getElementById('serviceType').value;
            const estimatedTime = document.getElementById('estimatedTime').value;
            const price = document.getElementById('price').value;

            if (!plate) {
                showNotification('Plaka numarasÄ± gerekli', 'error');
                return;
            }

            const existingCar = cars.find(car => car.plate === plate);
            if (existingCar) {
                showNotification('Bu plaka zaten kayÄ±tlÄ±', 'error');
                return;
            }

            try {
                const carData = {
                    plate: plate,
                    customerName: customerName || null,
                    customerPhone: customerPhone || null,
                    serviceType: serviceType,
                    estimatedTime: estimatedTime ? parseInt(estimatedTime) : null,
                    price: price ? parseFloat(price) : null,
                    status: 'waiting', // VarsayÄ±lan durum
                    createdAt: Timestamp.now(), // OluÅŸturma zaman damgasÄ±
                    createdBy: currentUser.name,
                    createdById: currentUser.uid
                };

                await addDoc(collection(db, 'cars'), carData);
                
                // Formu temizle
                document.getElementById('newPlate').value = '';
                document.getElementById('customerName').value = '';
                document.getElementById('customerPhone').value = '';
                document.getElementById('serviceType').value = 'DÄ±ÅŸ YÄ±kama';
                document.getElementById('estimatedTime').value = '';
                document.getElementById('price').value = '';

                showNotification('AraÃ§ baÅŸarÄ±yla eklendi', 'success');
            } catch (error) {
                console.error('AraÃ§ ekleme hatasÄ±:', error);
                showNotification('AraÃ§ ekleme hatasÄ±', 'error');
            }
        };

        window.updateCarStatus = async function(carId, newStatus) {
            if (!currentUser) {
                showNotification('EriÅŸim yetkiniz yok', 'error');
                return;
            }

            try {
                await updateDoc(doc(db, 'cars', carId), {
                    status: newStatus,
                    updatedAt: Timestamp.now(),
                    updatedBy: currentUser.name
                });

                const statusTexts = {
                    'waiting': 'SÄ±rada',
                    'washing': 'YÄ±kanÄ±yor',
                    'drying': 'Kurutuluyor',
                    'ready': 'HazÄ±r',
                    'completed': 'TamamlandÄ±'
                };

                showNotification('Durum gÃ¼ncellendi: ' + statusTexts[newStatus], 'success');
            } catch (error) {
                console.error('Durum gÃ¼ncelleme hatasÄ±:', error);
                showNotification('Durum gÃ¼ncelleme hatasÄ±', 'error');
            }
        };

        window.deleteCar = async function(carId) {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('Admin yetkisi gerekli', 'error');
                return;
            }

            // Silme onayÄ± iÃ§in Ã¶zel bir modal/dialog kullanÄ±n, alert yerine
            if (!confirm('Bu aracÄ± silmek istediÄŸinizden emin misiniz?')) {
                return;
            }

            try {
                await deleteDoc(doc(db, 'cars', carId));
                showNotification('AraÃ§ silindi', 'success');
            } catch (error) {
                console.error('AraÃ§ silme hatasÄ±:', error);
                showNotification('AraÃ§ silme hatasÄ±', 'error');
            }
        };

        // KullanÄ±cÄ± yÃ¶netimi fonksiyonlarÄ±
        window.addUser = async function() {
            if (!currentUser || currentUser.role !== 'admin') {
                showNotification('Admin yetkisi gerekli', 'error');
                return;
            }

            const email = document.getElementById('newUserEmail').value.trim();
            const password = document.getElementById('newUserPassword').value;
            const name = document.getElementById('newUserName').value.trim();
            const role = document.getElementById('newUserRole').value;

            if (!email || !password || !name) {
                showNotification('TÃ¼m alanlar gerekli', 'error');
                return;
            }

            if (password.length < 6) {
                showNotification('Åifre en az 6 karakter olmalÄ±', 'error');
                return;
            }

            try {
                // Firebase Authentication'da kullanÄ±cÄ± oluÅŸtur
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                // Firestore'a kullanÄ±cÄ± bilgilerini kaydet
                await setDoc(doc(db, 'users', userCredential.user.uid), {
                    email: email,
                    name: name,
                    role: role,
                    createdAt: Timestamp.now(),
                    createdBy: currentUser.name
                });

                // Formu temizle
                document.getElementById('newUserEmail').value = '';
                document.getElementById('newUserPassword').value = '';
                document.getElementById('newUserName').value = '';
                document.getElementById('newUserRole').value = 'employee';

                showNotification('KullanÄ±cÄ± baÅŸarÄ±yla eklendi', 'success');
            } catch (error) {
                console.error('KullanÄ±cÄ± ekleme hatasÄ±:', error);
                showNotification('KullanÄ±cÄ± ekleme hatasÄ±: ' + error.message, 'error');
            }
        };

        // Geri bildirim yÃ¶netimi
        window.markFeedbackAsRead = async function(feedbackId) {
            try {
                await updateDoc(doc(db, 'feedbacks', feedbackId), {
                    isRead: true
                });
                showNotification('Geri bildirim okundu olarak iÅŸaretlendi', 'success');
            } catch (error) {
                console.error('Geri bildirim gÃ¼ncelleme hatasÄ±:', error);
                showNotification('Ä°ÅŸlem baÅŸarÄ±sÄ±z', 'error');
            }
        };

        window.deleteFeedback = async function(feedbackId) {
            if (!confirm('Bu geri bildirimi silmek istediÄŸinizden emin misiniz?')) {
                return;
            }

            try {
                await deleteDoc(doc(db, 'feedbacks', feedbackId));
                showNotification('Geri bildirim silindi', 'success');
            } catch (error) {
                console.error('Geri bildirim silme hatasÄ±:', error);
                showNotification('Silme iÅŸlemi baÅŸarÄ±sÄ±z', 'error');
            }
        };

        // Render fonksiyonlarÄ± (UI gÃ¼ncellemeleri iÃ§in)
        function renderCars(container, carsToRender, showActions) {
            if (carsToRender.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #777;">AraÃ§ bulunamadÄ±.</p>';
                return;
            }

            const statusTexts = {
                'waiting': 'SÄ±rada',
                'washing': 'YÄ±kanÄ±yor',
                'drying': 'Kurutuluyor',
                'ready': 'HazÄ±r',
                'completed': 'TamamlandÄ±'
            };

            const carCards = carsToRender.map(function(car) {
                const createdAt = car.createdAt && car.createdAt.toDate ? car.createdAt.toDate() : new Date(car.createdAt);
                const timeStr = createdAt.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
                
                let actionsHtml = '';
                if (showActions) {
                    actionsHtml = '<div class="status-controls">' +
                        '<button class="status-btn ' + (car.status === 'waiting' ? 'active' : '') + '" onclick="updateCarStatus(\'' + car.id + '\', \'waiting\')">' +
                        '<i class="fa-solid fa-clock"></i> SÄ±rada</button>' +
                        '<button class="status-btn ' + (car.status === 'washing' ? 'active' : '') + '" onclick="updateCarStatus(\'' + car.id + '\', \'washing\')">' +
                        '<i class="fa-solid fa-water"></i> YÄ±kanÄ±yor</button>' +
                        '<button class="status-btn ' + (car.status === 'drying' ? 'active' : '') + '" onclick="updateCarStatus(\'' + car.id + '\', \'drying\')">' +
                        '<i class="fa-solid fa-wind"></i> Kurutuluyor</button>' +
                        '<button class="status-btn ' + (car.status === 'ready' ? 'active' : '') + '" onclick="updateCarStatus(\'' + car.id + '\', \'ready\')">' +
                        '<i class="fa-solid fa-check"></i> HazÄ±r</button>' +
                        '<button class="status-btn ' + (car.status === 'completed' ? 'active' : '') + '" onclick="updateCarStatus(\'' + car.id + '\', \'completed\')">' +
                        '<i class="fa-solid fa-flag-checkered"></i> TamamlandÄ±</button>' +
                        '</div>';
                    
                    if (currentUser && currentUser.role === 'admin') {
                        actionsHtml += '<div class="button-group">' +
                            '<button class="btn btn-danger" onclick="deleteCar(\'' + car.id + '\')">' +
                            '<i class="fa-solid fa-trash"></i> Sil</button></div>';
                    }
                }

                return '<div class="car-card">' +
                    '<div class="car-header">' +
                    '<div class="plate-number">' + car.plate + '</div>' +
                    '<div class="status ' + car.status + '">' + statusTexts[car.status] + '</div>' +
                    '</div>' +
                    '<div class="car-details">' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">MÃ¼ÅŸteri</div>' +
                    '<div class="detail-value">' + (car.customerName || 'BelirtilmemiÅŸ') + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">Telefon</div>' +
                    '<div class="detail-value">' + (car.customerPhone || 'BelirtilmemiÅŸ') + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">Hizmet</div>' +
                    '<div class="detail-value">' + car.serviceType + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">SÃ¼re</div>' +
                    '<div class="detail-value">' + (car.estimatedTime ? car.estimatedTime + ' dk' : 'BelirtilmemiÅŸ') + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">Fiyat</div>' +
                    '<div class="detail-value">' + (car.price ? 'â‚º' + car.price.toLocaleString('tr-TR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : 'BelirtilmemiÅŸ') + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">GiriÅŸ Saati</div>' +
                    '<div class="detail-value">' + timeStr + '</div>' +
                    '</div>' +
                    '</div>' +
                    actionsHtml +
                    '</div>';
            }).join('');

            container.innerHTML = carCards;
        }

        // AraÃ§ listelerini render et (Ã§alÄ±ÅŸan ve raporlar iÃ§in)
        function renderCarLists() {
            const employeeList = document.getElementById('employeeCarList');
            const dailyList = document.getElementById('dailyCarsList');

            if (employeeList && document.getElementById('employeeScreen').classList.contains('active')) {
                const activeCars = cars.filter(function(car) { return car.status !== 'completed'; });
                renderCars(employeeList, activeCars, true); // Ã‡alÄ±ÅŸan panelinde aksiyon butonlarÄ± gÃ¶ster
            }

            if (dailyList && document.getElementById('reportsScreen').classList.contains('active')) {
                const today = new Date();
                const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
                const dailyCars = cars.filter(function(car) {
                    const carDate = car.createdAt && car.createdAt.toDate ? car.createdAt.toDate() : new Date(car.createdAt);
                    return carDate >= todayStart;
                });
                renderCars(dailyList, dailyCars, false); // Rapor ekranÄ±nda aksiyon butonlarÄ± gÃ¶sterme
            }
        }

        // KullanÄ±cÄ± listesini render et
        function renderUserList() {
            const userList = document.getElementById('userList');
            if (!userList || !currentUser || currentUser.role !== 'admin') return; // Sadece adminler iÃ§in

            if (users.length === 0) {
                userList.innerHTML = '<p style="text-align: center; color: #777;">KullanÄ±cÄ± bulunamadÄ±.</p>';
                return;
            }

            const userCards = users.map(function(user) {
                const createdDate = user.createdAt && user.createdAt.toDate ? user.createdAt.toDate().toLocaleDateString('tr-TR') : 'Bilinmiyor';
                return '<div class="car-card">' + // car-card sÄ±nÄ±fÄ±nÄ± yeniden kullan
                    '<div class="car-header">' +
                    '<div class="plate-number" style="font-size: 20px;">' + user.name + '</div>' +
                    '<div class="status ' + (user.role === 'admin' ? 'completed' : 'ready') + '">' + // Renklendirme iÃ§in durum sÄ±nÄ±flarÄ±nÄ± kullan
                    (user.role === 'admin' ? 'Admin' : 'Ã‡alÄ±ÅŸan') +
                    '</div>' +
                    '</div>' +
                    '<div class="car-details">' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">E-posta</div>' +
                    '<div class="detail-value">' + user.email + '</div>' +
                    '</div>' +
                    '<div class="detail-item">' +
                    '<div class="detail-label">OluÅŸturulma</div>' +
                    '<div class="detail-value">' + createdDate + '</div>' +
                    '</div>' +
                    '</div>' +
                    '</div>';
            }).join('');

            userList.innerHTML = userCards;
        }

        // Geri bildirim gelen kutusunu render et
        function renderFeedbackInbox() {
            const feedbackInbox = document.getElementById('feedbackInbox');
            if (!feedbackInbox || !currentUser || currentUser.role !== 'admin') return; // Sadece adminler iÃ§in

            if (feedbacks.length === 0) {
                feedbackInbox.innerHTML = '<div class="no-feedback">' +
                    '<i class="fa-solid fa-inbox" style="font-size: 48px; margin-bottom: 15px; color: #ddd;"></i>' +
                    '<p>HenÃ¼z geri bildirim bulunmuyor.</p>' +
                    '</div>';
                return;
            }

            const unreadCount = feedbacks.filter(function(f) { return !f.isRead; }).length;
            
            const feedbackItems = feedbacks.map(function(feedback) {
                const createdAt = feedback.createdAt && feedback.createdAt.toDate ? feedback.createdAt.toDate() : new Date();
                const timeStr = createdAt.toLocaleString('tr-TR');
                
                let starsHtml = '';
                for (let i = 0; i < 5; i++) {
                    starsHtml += '<span class="star ' + (i < feedback.rating ? 'active' : '') + '">â­</span>';
                }

                const unreadStyle = feedback.isRead ? '' : 'border-left-color: #ff6b6b; background: #fff5f5;'; // OkunmadÄ±ysa stil
                const newBadge = !feedback.isRead ? '<span style="background: #ff6b6b; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 10px;">YENÄ°</span>' : '';
                const commentSection = feedback.comment ? '<div class="feedback-comment">' +
                    '<i class="fa-solid fa-quote-left"></i> ' +
                    feedback.comment +
                    '</div>' : '';
                const readButton = !feedback.isRead ? '<button class="btn btn-primary" style="padding: 6px 12px; font-size: 12px;" onclick="markFeedbackAsRead(\'' + feedback.id + '\')">' +
                    '<i class="fa-solid fa-check"></i> Okundu Ä°ÅŸaretle</button>' : '';

                return '<div class="feedback-item" style="' + unreadStyle + '">' +
                    '<div class="feedback-header">' +
                    '<div>' +
                    '<strong>' + feedback.customerName + '</strong>' +
                    '<span style="margin-left: 10px; color: #666; font-size: 14px;">(' + feedback.plate + ')</span>' +
                    newBadge +
                    '</div>' +
                    '<div class="feedback-rating">' + starsHtml + '</div>' +
                    '</div>' +
                    '<div class="feedback-meta">' +
                    '<span><i class="fa-solid fa-calendar"></i> ' + timeStr + '</span>' +
                    '<span><i class="fa-solid fa-star"></i> ' + feedback.rating + '/5</span>' +
                    '</div>' +
                    commentSection +
                    '<div class="feedback-actions">' +
                    readButton +
                    '<button class="btn btn-danger" style="padding: 6px 12px; font-size: 12px;" onclick="deleteFeedback(\'' + feedback.id + '\')">' +
                    '<i class="fa-solid fa-trash"></i> Sil</button>' +
                    '</div>' +
                    '</div>';
            }).join('');

            const unreadBadge = unreadCount > 0 ? 'â€¢ <span style="background: #ff6b6b; padding: 4px 8px; border-radius: 10px; margin-left: 8px;">' + unreadCount + ' Yeni</span>' : '';

            feedbackInbox.innerHTML = '<div style="margin-bottom: 20px; text-align: center;">' +
                '<span style="background: #4a5ee5; color: white; padding: 8px 16px; border-radius: 20px; font-weight: bold;">' +
                '<i class="fa-solid fa-envelope"></i> ' + feedbacks.length + ' Toplam Geri Bildirim ' +
                unreadBadge +
                '</span>' +
                '</div>' +
                feedbackItems;
        }

        // RaporlarÄ± oluÅŸtur ve gÃ¼ncelle
        function generateReports() {
            const today = new Date();
            const todayStart = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            
            const todayCars = cars.filter(function(car) {
                const carDate = car.createdAt && car.createdAt.toDate ? car.createdAt.toDate() : new Date(car.createdAt);
                return carDate >= todayStart;
            });

            const activeCars = todayCars.filter(function(car) { return car.status !== 'completed'; });
            const completedCars = todayCars.filter(function(car) { return car.status === 'completed'; });
            const totalRevenue = completedCars.reduce(function(sum, car) { return sum + (car.price || 0); }, 0);

            const todayFeedbacks = feedbacks.filter(function(feedback) {
                const feedbackDate = feedback.createdAt && feedback.createdAt.toDate ? feedback.createdAt.toDate() : new Date(feedback.createdAt);
                return feedbackDate >= todayStart;
            });

            const avgRating = todayFeedbacks.length > 0 
                ? (todayFeedbacks.reduce(function(sum, f) { return sum + f.rating; }, 0) / todayFeedbacks.length).toFixed(1)
                : '0.0';

            document.getElementById('totalCars').textContent = todayCars.length;
            document.getElementById('activeCars').textContent = activeCars.length;
            document.getElementById('completedCars').textContent = completedCars.length;
            document.getElementById('totalRevenue').textContent = 'â‚º' + totalRevenue.toLocaleString('tr-TR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('avgRating').textContent = avgRating;
        }

        // Olay iÅŸleyicilerini baÅŸlat
        function initializeEventHandlers() {
            document.addEventListener('click', function(e) {
                if (e.target.matches('#starRating .star')) {
                    const rating = parseInt(e.target.getAttribute('data-rating'));
                    setRating(rating);
                }
            });

            document.addEventListener('keypress', function(e) {
                // GiriÅŸ ekranÄ±nda Enter tuÅŸu ile giriÅŸ yapma
                if (e.key === 'Enter' && document.getElementById('loginScreen').classList.contains('active')) {
                    const email = document.getElementById('email');
                    const password = document.getElementById('password');
                    if (email === document.activeElement || password === document.activeElement) {
                        login();
                    }
                }
            });
        }

        // UygulamayÄ± baÅŸlat
        async function initApp() {
            await initFirebase(); // Firebase'i baÅŸlat
            initializeEventHandlers(); // Olay iÅŸleyicilerini kur
        }
        
        // UygulamayÄ± yÃ¼kle
        initApp();

        console.log("Oto YÄ±kama Takip Sistemi - Tek Sayfa UygulamasÄ± BaÅŸlatÄ±ldÄ±");
    </script>
</body>
</html>
